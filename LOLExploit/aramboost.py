from lcu_driver import Connector
import os
import colorama
import ctypes

client = Connector()
colorama.init()
ctypes.windll.kernel32.SetConsoleTitleW("[LF] Aram/URF skin boost Tool")

@client.ready
async def main(cmd) -> None:
    print(colorama.Style.BRIGHT + colorama.Fore.YELLOW + "[LF] Aram/URF skin boost" + colorama.Style.RESET_ALL)
    summoner = await cmd.request("GET", "/lol-summoner/v1/current-summoner")
    if summoner.status == 200:
        data: dict = await summoner.json()
        print(colorama.Style.BRIGHT + colorama.Fore.CYAN + "[LF] League of Legends Client has been founded." + colorama.Style.RESET_ALL) 
        print(colorama.Style.BRIGHT + colorama.Fore.MAGENTA + "[LF] Logined Account : " + colorama.Fore.GREEN + data["displayName"] + colorama.Style.RESET_ALL)
        
        print(colorama.Style.BRIGHT + colorama.Fore.MAGENTA + "[LF] Write 'Boost' for skin boost!" + colorama.Style.RESET_ALL)
        if input() == "Boost":
            boostResult = await Boost(cmd)
            if boostResult is True:
                print(colorama.Style.BRIGHT + colorama.Fore.GREEN + "[LF] Succesfully boosted!" + colorama.Style.RESET_ALL)
            else:
                print(colorama.Style.BRIGHT + colorama.Fore.RED + "[LF] Something went wrong? (Maybe need hotfix client)" + colorama.Style.RESET_ALL)
                int(input())
    else:
        print(colorama.Style.BRIGHT + colorama.Fore.RED + "[LF] League of Legends has not founded!" + colorama.Style.RESET_ALL)
        int(input())

async def Boost(cmd) -> bool:
    req = await cmd.request("POST", "/lol-champ-select/v1/team-boost/purchase")
    if req.status == 204:
        return True
    elif req.status == 500:
        return True
    else:
        return False

@client.close
async def clientClosed(cmd) -> None:
    print(colorama.Style.BRIGHT + colorama.Fore.RED + "[LF] Client communication closed." + colorama.Style.RESET_ALL)
    int(input())

client.start()